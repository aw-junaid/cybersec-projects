#!/usr/bin/env python3
"""
Malware Obfuscation Practice Framework
Educational tool for demonstrating basic code obfuscation
For lab use only. No malicious payloads.
"""

import base64
import sys

def xor_encrypt(data, key):
    return ''.join(chr(ord(c) ^ ord(key[i % len(key)])) for i, c in enumerate(data))

def base64_encode(data):
    return base64.b64encode(data.encode()).decode()

def base64_decode(data):
    return base64.b64decode(data.encode()).decode()

def xor_decode(data, key):
    return xor_encrypt(data, key)  # XOR is symmetric

def menu():
    print("\n--- Malware Obfuscation Practice ---")
    print("1. Base64 Encode")
    print("2. Base64 Decode")
    print("3. XOR Encrypt")
    print("4. XOR Decrypt")
    print("5. Exit")

def main():
    while True:
        menu()
        choice = input("Select option: ")

        if choice == "1":
            text = input("Enter plain text: ")
            encoded = base64_encode(text)
            print("\n[+] Encoded Base64:\n", encoded)

        elif choice == "2":
            encoded = input("Enter Base64 text: ")
            decoded = base64_decode(encoded)
            print("\n[+] Decoded text:\n", decoded)

        elif choice == "3":
            text = input("Enter text to encrypt: ")
            key = input("Enter key: ")
            enc = xor_encrypt(text, key)
            enc_b64 = base64_encode(enc)
            print("\n[+] XOR + Base64 obfuscated string:\n", enc_b64)

        elif choice == "4":
            enc_b64 = input("Enter XOR+Base64 text: ")
            key = input("Enter key: ")
            enc = base64_decode(enc_b64)
            dec = xor_decode(enc, key)
            print("\n[+] Decrypted text:\n", dec)

        elif choice == "5":
            print("Exiting...")
            break
        else:
            print("Invalid choice.")
